local NotifyPropertyChanged = class("NotifyPropertyChanged")

NotifyPropertyChanged.__setter.PropertyChanged = function (this, k, v)
    if v and v.callback ~= nil then
        table.insert(this.propertyChanged, v)
    else
        for i, value in ipairs(this.propertyChanged) do
            if v.this == value.this then
                table.remove(this.propertyChanged, i)
                break
            end
        end
    end
end

function NotifyPropertyChanged:ctor()
    self.propertyChanged = {}
end

return NotifyPropertyChanged