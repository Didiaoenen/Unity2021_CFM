local NotifiableSourceProxyBase = require("LuaFramework/NotifiableSourceProxyBase")

local PropertyNodeProxy = class("PropertyNodeProxy", NotifiableSourceProxyBase)

function PropertyNodeProxy:ctor(source, propertyInfo)
    self.super:ctor(source)
    self.propertyInfo = propertyInfo

    if not self.source then
        return
    end
    
    self.source.PropertyChanged = function (sender, e)
        self:OnPropertyChanged(sender, e)
    end
end

function PropertyNodeProxy:OnPropertyChanged(sender, e)
    local name = e.PropertyName
    if name and name ~= "" then
        self:RaiseValueChanged()
    end
end

function PropertyNodeProxy:GetValue()
    local source = self.source
    if not source then
        return
    end

    return source[self.propertyInfo]
end

function PropertyNodeProxy:SetValue(value)
    local source = self.source
    if not source then
        return
    end

    source[self.propertyInfo] = value
end

function PropertyNodeProxy:Dispose()
    
end

return PropertyNodeProxy