local BindTransform = require("LuaFramework.Views.BindComponents.BindTransform")
local RectTransformExt = require("LuaFramework.Views.Components.RectTransformExt")

local BindRectTransform = class("BindRectTransform", BindTransform)

function BindRectTransform.get:OffsetMax()
   return self.offsetMax
end

function BindRectTransform.set:OffsetMax(value)
   self:Set({ name = "offsetMax" }, value, "OffsetMax")
end

function BindRectTransform.get:OffsetMin()
   return self.offsetMin
end

function BindRectTransform.set:OffsetMin(value)
   self:Set({ name = "offsetMin" }, value, "OffsetMin")
end

function BindRectTransform:ctor()
   BindTransform.ctor(self)
   self.offsetMax = CS.UnityEngine.Vector2.zero
   self.offsetMin = CS.UnityEngine.Vector2.zero
end

function BindRectTransform:BindWithName(view, name, modes)
   BindTransform.BindWithName(self, view, name, modes)

   local component = view:GetComponentWithName(RectTransformExt, name)
   local bindingSet = view.bindingSet
   local rectTransformExt = component

   local index = 0
   local _Mode = function()
      index = #(modes) > 1 and index + 1 or 1
      return modes[index]
   end

   local builder = bindingSet:BindByTarget(component)
   builder:For(rectTransformExt.OffsetMax):To(name .. ".OffsetMax"):SetMode(_Mode())

   builder = bindingSet:BindByTarget(component)
   builder:For(rectTransformExt.OffsetMin):To(name .. ".OffsetMin"):SetMode(_Mode())
end

function BindRectTransform:dtor()
end

return BindRectTransform
